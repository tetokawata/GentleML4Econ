[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "データ分析入門ノート",
    "section": "",
    "text": "Preface",
    "crumbs": [
      "Preface"
    ]
  },
  {
    "objectID": "index.html#本ノートの狙い",
    "href": "index.html#本ノートの狙い",
    "title": "データ分析入門ノート",
    "section": "本ノートの狙い",
    "text": "本ノートの狙い\n初学者に対して、データ分析法、具体的な分析工程に埋め込みながら紹介します。 特に分析法の急速な多様化に対応するため、分析のゴールに応じた整理し、実践への活用における混乱を減らすことに重点を置きます。 具体的には、以下の点に注意して、本ノートは作成されています。\n\n２種類の分析のゴール、「新しい事例について欠損情報の予測を行う予測」と 「事例の集団についてその特徴を把握するための分析法」、を紹介します。 把握のための分析の具体例としては、比較分析を主に扱います。例えば男女間賃金格差や前年と比較した場合の不動産価格変化など、集団間で見られる違いを把握する方法を紹介します。\n平均値の推定やOLSといった計量経済学の入門書で紹介される伝統的な手法だけでなく、決定木やRandomForestといった教師付き学習(機械学習の一分野)の手法も議論します。 分析のゴールが予測モデルの推定であるならば機械学習に比較優位があり、集団の特徴を把握することが目標であるならば、伝統的な手法に比較優位があることを、その理由とともに強調します。 さらに発展的な比較をゴールとする場合、教師付き学習と伝統的な手法のハイブリット的な手法が有効であることも論じます。\n予測と把握という分析のゴールの使い分け方を、具体的な意思決定を想定しながら整理します。 データ分析の目的を、意思決定に役立つ情報提供にあると位置付け、意思決定の種類に応じた分析のゴールを論じます。特に限られた事例にのみ影響を与える意思決定 (ミクロな意思決定)と大量の事例に影響を与える意思決定 (マクロな意思決定)を区別します。 教師付き学習がもたらす事例ごとの予測は、ミクロな意思決定においては非常に有効であったとしても、マクロな意思決定においてはそのままでは活用が難しいことを強調します。これは大量の事例について提供される大量の予測値を、意思決定者が活用することが難しいためです。 マクロな意思決定においては、大量の事例群の特徴を把握が必要になり、このためには伝統的な手法が比較優位を持ちます。 ただし複雑な特徴を把握する上では、伝統的な手法と教師付き学習のハイブリット的な手法が有効になることを強調します。",
    "crumbs": [
      "Preface"
    ]
  },
  {
    "objectID": "index.html#分析工程",
    "href": "index.html#分析工程",
    "title": "データ分析入門ノート",
    "section": "分析工程",
    "text": "分析工程\n想定する具体的なデータ分析の工程は以下です。\n\n\n\n\n\n\n\n\n\n\nQ\n直面する意思決定問題\n\n\n\nUnderstand\n把握を目的とする研究\n\n\n\nQ-&gt;Understand\n\n\n\n\n\nPrediction\n予測を目的とする研究\n\n\n\nQ-&gt;Prediction\n\n\n\n\n\nStat\n伝統的な手法\n\n\n\nUnderstand-&gt;Stat\n\n\n\n\n\nML\n教師付き学習\n\n\n\nPrediction-&gt;ML\n\n\n\n\n\nPredModel\n予測モデル\n\n\n\nEstimand\nシンプルな特徴把握\n\n\n\nStat-&gt;Estimand\n\n\n\n\n\nDML\n複雑な特徴把握\n\n\n\nStat-&gt;DML\n\n\n\n\n\nML-&gt;PredModel\n\n\n\n\n\nDML-&gt;ML\n\n\n\n\n\n\n\n\n\n\nまず現在必要とされている意思決定問題を明確化します。 次にその意思決定問題に有益な情報を明確にすることで、分析のゴールを設定します。 ここでは大きく予測を目的とする研究と集団の特徴把握を目標とする研究に大別し論じます。 次にそれぞれのゴールに適した手法を用いた推定を行い、分析結果を得ます。 ここでは予測を目標とする研究であれば教師付き学習の手法、把握を目標とするのであれば伝統的な手法、より複雑な特徴を把握したいのであればそのハイブリット的な方法に比較優位があることを論じます。",
    "crumbs": [
      "Preface"
    ]
  },
  {
    "objectID": "index.html#ノートの背景",
    "href": "index.html#ノートの背景",
    "title": "データ分析入門ノート",
    "section": "ノートの背景",
    "text": "ノートの背景\n本ノート作成の背景には、データ分析法の多様化とそれに伴う混乱があります。 データを用いた社会分析は、長い伝統を持ちます。 例えば経済学においては、古くからデータ分析が活用され、計量経済学と呼ばれる方法論開発を行う研究分野には多くの研究者が参入し、活発な議論が行われてきました。 また実際にデータを用いて行う実証研究も数多く行われ、伝統的にはOLSなどのモーメント法や最尤法などを用いたデータ分析が行われてきました。\n近年、コンピュータの計算能力増大などを背景に、伝統的な分析手法のみならず、機械学習と総称される分析手法の活用が急速に進んでいます。 特に教師付き学習と呼ばれる分野は、経済学における伝統的な推定手法と近い手法や問題意識を有しつつ、データの柔軟な活用方法を提供しています。 例えば、教師付き学習の教科書では、ほぼ例外なくLogitやOLSは紹介され、母分布を用いた論点整理がなされています。 他方で計量経済学の入門書ではあまり紹介されてこなかった、Data adaptive modellingの手法が数多く提案されています。 伝統的な推定手法が、「人間によってシンプルな 推定モデルの設定を行い、その限られたパラメタをデータにより推定する」という手続きを踏むのに対して、決定木やLASSOは、「大量のパラメタを、データによる適切に推定する」方法です。\nこのような分析方法の多様化は、同時に応用研究における混乱ももたらしえます。例えば Breiman (2001) は、伝統的な統計学の95 \\(\\%\\) と機械学習では、異なる”文化”を持っていると主張し、多くの議論を想起しました。 このような議論 (Shmueli 2010; Efron 2020; Hofman et al. 2021)の中で、分析のゴールをしっかり意識することの重要性が指摘され、ゴールによっては伝統的な手法と機械学習のハイブリット的な方法の有効性が指摘されています(Van der Laan, Rose, et al. 2011; Chernozhukov et al. 2018, 2022)。\nこのような研究の成果は、上級レベルの計量経済学のテキストでは紹介され、また@@@ などで集中的にまとめられています。 しかしながら、現状入門的な日本語の教材は見当たりません。 本ノートは、この空白を埋めることを目的としています。",
    "crumbs": [
      "Preface"
    ]
  },
  {
    "objectID": "index.html#章立て",
    "href": "index.html#章立て",
    "title": "データ分析入門ノート",
    "section": "章立て",
    "text": "章立て\n\nSection 1  重要なコンセプト\nSection 2  意思決定問題\nSection 3  予測モデルの推定\nSection 4  単純な比較分析\nSection 5  複雑な比較分析",
    "crumbs": [
      "Preface"
    ]
  },
  {
    "objectID": "index.html#reference",
    "href": "index.html#reference",
    "title": "データ分析入門ノート",
    "section": "Reference",
    "text": "Reference\n\n\n\n\nBreiman, Leo. 2001. “Statistical Modeling: The Two Cultures (with Comments and a Rejoinder by the Author).” Statistical Science 16 (3): 199–231.\n\n\nChernozhukov, Victor, Denis Chetverikov, Mert Demirer, Esther Duflo, Christian Hansen, Whitney Newey, and James Robins. 2018. “Double/debiased machine learning for treatment and structural parameters.” The Econometrics Journal 21 (1): C1–68. https://doi.org/10.1111/ectj.12097.\n\n\nChernozhukov, Victor, Juan Carlos Escanciano, Hidehiko Ichimura, Whitney K Newey, and James M Robins. 2022. “Locally Robust Semiparametric Estimation.” Econometrica 90 (4): 1501–35.\n\n\nEfron, Bradley. 2020. “Prediction, Estimation, and Attribution.” International Statistical Review 88: S28–59.\n\n\nHofman, Jake M, Duncan J Watts, Susan Athey, Filiz Garip, Thomas L Griffiths, Jon Kleinberg, Helen Margetts, et al. 2021. “Integrating Explanation and Prediction in Computational Social Science.” Nature 595 (7866): 181–88.\n\n\nShmueli, Galit. 2010. “To Explain or to Predict?” Statistical Science 25 (3): 289–310.\n\n\nVan der Laan, Mark J, Sherri Rose, et al. 2011. Targeted Learning: Causal Inference for Observational and Experimental Data. Vol. 4. Springer.",
    "crumbs": [
      "Preface"
    ]
  },
  {
    "objectID": "model.html",
    "href": "model.html",
    "title": "1  重要なコンセプト",
    "section": "",
    "text": "1.1 状況設定\n本ノートにおいてデータ分析法は、「事例から学ぶ方法」として位置付けます。 事例とは、過去の経験や出来事、歴史などであり、その蓄積をデータと呼びます。 例えば不動産取引調査から、以下のような不動産取引事例をダウンロードできます。\nPrice\nSize\nTradeYear\nLargeDistrict\n\n\n\n\n11\n15\n2022\n中心6区\n\n\n32\n30\n2022\n中心6区\n\n\n85\n45\n2022\n中心6区\n\n\n130\n80\n2022\n中心6区\n\n\n58\n55\n2021\n中心6区\n\n\n51\n55\n2021\n中心6区\n\n\n11\n20\n2021\n中心6区\n\n\n140\n95\n2021\n中心6区\n\n\n48\n35\n2021\n中心6区\n\n\n49\n40\n2021\n中心6区\n以上のような取引事例が 6378 個収録されています。 このようなデータを用いて、以下のような意思決定問題に役立つ情報提供のあり方を、ラフに論じます。",
    "crumbs": [
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>重要なコンセプト</span>"
    ]
  },
  {
    "objectID": "model.html#状況設定",
    "href": "model.html#状況設定",
    "title": "1  重要なコンセプト",
    "section": "",
    "text": "直面する意思決定問題1: ある物件の買取価格の決定\n\n必要な情報: その物件の市場価格\n\n直面する意思決定問題2: 営業や支店網構築の重点地域決定\n\n必要な情報: どのような地域で取引価格が伸びているのか把握",
    "crumbs": [
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>重要なコンセプト</span>"
    ]
  },
  {
    "objectID": "model.html#分析例-個別事例分析",
    "href": "model.html#分析例-個別事例分析",
    "title": "1  重要なコンセプト",
    "section": "1.2 分析例: 個別事例分析",
    "text": "1.2 分析例: 個別事例分析\n典型的な事例分析法として、個別の事例を丹念に調べていく方法があります。 例えば、以下の5800万円で取引されている物件が、データの中に含まれていました。\n\n\n\n\n\n\n\n\nPrice\nSize\nTradeYear\nLargeDistrict\n\n\n\n\n200\n105\n2022\n中心6区\n\n\n\n\n\n\n\nこの事例から、同様の特徴を持つ物件は2億円で取引される傾向があったと結論づけても良いでしょうか？ ほとんどの応用でこのような推測は、不適切です。 実際に同じデータの中に、取引価格以外全く同じ特徴を持つ物件の取引事例が3件ありました。 これらの事例と比較すると、2億円はかなり低い価格での取引だったことがわかります。\n\n\n\n\n\n\n\n\nPrice\nSize\nTradeYear\nLargeDistrict\n\n\n\n\n200\n105\n2022\n中心6区\n\n\n150\n105\n2022\n中心6区\n\n\n92\n105\n2022\n中心6区\n\n\n110\n105\n2022\n中心6区\n\n\n\n\n\n\n\nなぜこのような取引価格のブレが生じるのでしょうか？ データのご入力など潜在的な理由は多岐に渡りますが、有力なのは、このデータに含まれない重要な情報 が存在することです。 例えば、最寄駅や公園の近くにあるか否かなどのより詳細な立地情報が考えられます。 このような詳細な立地も、取引価格に影響を与え、結果として事例の下振れ/上振れが生じます。",
    "crumbs": [
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>重要なコンセプト</span>"
    ]
  },
  {
    "objectID": "model.html#分析例-モデル化",
    "href": "model.html#分析例-モデル化",
    "title": "1  重要なコンセプト",
    "section": "1.3 分析例: モデル化",
    "text": "1.3 分析例: モデル化\n現代の分析で用いられるデータは、一般に多くの事例を含んでいます。\n\n\n\n\n\n\n\n\n\n上記の散布図は、社会分析に用いるデータの持つ典型的な特徴を表しています。 乱雑であり、同じ\\(X\\) でも \\(Y\\) が異なる事例が多い\n\n1.3.1 丸暗記\n個別事例分析の平均値を使う。 全ての\\(X\\)に適用\n\n\n\n\n\n\n\n\n\n決定係数は、0.676 でした。\n\n\n1.3.2 サブグループ平均\n\n分析者が、サブグループ (モデル) を定義する\n\n\n例: 練馬区かどうか \\(\\times\\) 部屋の広さが20以下\n\n\nサブグループの平均値を計算\n\n\n集計により事例固有の観察できない要因の影響を軽減する\nモデルの定義を変えると、推定結果が大きく変化する\n\n\n\n1.3.3 決定木\n\n決定木アルゴリズム: データに最も適合するように、サブグループを定義する\n\n明確な基準(“データへの適合”)のもとで、要約方法を決定\n\n例. 最大４グループに分けることは前提に、平均二乗誤差 \\[(Y - モデルの予測値)^2のデータ上での平均値\\] を可能な限り削減するようにグループ分けを行う\n\n近似的に削減する (Greedy-algorithm)\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n1.3.4 決定木",
    "crumbs": [
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>重要なコンセプト</span>"
    ]
  },
  {
    "objectID": "model.html#機械学習",
    "href": "model.html#機械学習",
    "title": "1  重要なコンセプト",
    "section": "1.4 機械学習",
    "text": "1.4 機械学習",
    "crumbs": [
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>重要なコンセプト</span>"
    ]
  },
  {
    "objectID": "model.html#推定法",
    "href": "model.html#推定法",
    "title": "1  重要なコンセプト",
    "section": "1.5 推定法",
    "text": "1.5 推定法\n\n要約の方法として、大きく統計学と機械学習/AIがキーワードとして流布している\n\n伝統的な計量経済学は、統計学と密接\n機械学習は、統計学とは異なるルーツ(AIの開発)を持つ",
    "crumbs": [
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>重要なコンセプト</span>"
    ]
  },
  {
    "objectID": "model.html#機械学習-1",
    "href": "model.html#機械学習-1",
    "title": "1  重要なコンセプト",
    "section": "1.6 機械学習",
    "text": "1.6 機械学習\n\n新しい推定のアイディアを、データ分析が持ち込まれている\n\n伝統的な方法と比べて、よりデータ主導のモデル化を行う傾向がある",
    "crumbs": [
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>重要なコンセプト</span>"
    ]
  },
  {
    "objectID": "decision.html",
    "href": "decision.html",
    "title": "2  意思決定問題",
    "section": "",
    "text": "定量的な比較、（反実仮想）因果推定、予測分析をRによって行う方法を紹介",
    "crumbs": [
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>意思決定問題</span>"
    ]
  },
  {
    "objectID": "prediction.html",
    "href": "prediction.html",
    "title": "3  予測モデルの推定",
    "section": "",
    "text": "3.1 現実\nX\nX\n\n\n\nf_Y\n「未知の」メカニズム\n\n\n\nX-&gt;f_Y\n\n\n\n\n\nY\nY\n\n\n\nf_Y-&gt;Y",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>予測モデルの推定</span>"
    ]
  },
  {
    "objectID": "prediction.html#ml",
    "href": "prediction.html#ml",
    "title": "3  予測モデルの推定",
    "section": "3.2 ML",
    "text": "3.2 ML\n\n\n\n\n\n\n\n\n\n\nX\nX\n\n\n\nf_Y\n「未知の」メカニズム\n\n\n\nX-&gt;f_Y\n\n\n\n\n\ng_Y\n複雑なモデル\n\n\n\nX-&gt;g_Y\n\n\n\n\n\nY\nY\n\n\n\nf_Y-&gt;Y\n\n\n\n\n\nf_Y-&gt;g_Y\n\n\n近似\n\n\n\ng_Y-&gt;Y\n\n\n\n\n\nEst\n推定\n\n\n\ng_Y-&gt;Est",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>予測モデルの推定</span>"
    ]
  },
  {
    "objectID": "prediction.html#getting-started",
    "href": "prediction.html#getting-started",
    "title": "3  予測モデルの推定",
    "section": "3.3 Getting Started",
    "text": "3.3 Getting Started",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>予測モデルの推定</span>"
    ]
  },
  {
    "objectID": "prediction.html#予測問題",
    "href": "prediction.html#予測問題",
    "title": "3  予測モデルの推定",
    "section": "3.4 予測問題",
    "text": "3.4 予測問題\n\n定義: 欠損情報 \\(Y\\) を、観察できる変数 \\(X\\) から予測するモデル \\(g(X)\\) を構築する\n\n視聴履歴やいいね数 \\((X) \\rightarrow\\) 好む未視聴動画 \\((Y)\\)\nメールの文名や件名 \\((X) \\rightarrow\\) 迷惑メール \\((Y)\\)\n事業の内容や財務状況 \\((X) \\rightarrow\\) デフォルトリスク \\((Y)\\)\n\n\\(Y,X\\) が共に観察できるデータを活用できれば、推定方法がある程度確立されている (教師付き学習)",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>予測モデルの推定</span>"
    ]
  },
  {
    "objectID": "prediction.html#アイディア",
    "href": "prediction.html#アイディア",
    "title": "3  予測モデルの推定",
    "section": "3.5 アイディア",
    "text": "3.5 アイディア\n\n過去の \\(Y-X\\) の間の定量的なパターンを、データから抽出し、予測に利用する\n\n「1平米広い部屋は100万円高い価格で取引されがち」など\n\nそのデータ上にのみ偶然現れたパターンに注意する\n\n\n予測の対象となる新しい事例と過去の事例(データ)との間に、一貫性が必要",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>予測モデルの推定</span>"
    ]
  },
  {
    "objectID": "prediction.html#データ分割による評価",
    "href": "prediction.html#データ分割による評価",
    "title": "3  予測モデルの推定",
    "section": "3.6 データ分割による評価",
    "text": "3.6 データ分割による評価\n\n予測モデルの性能をどのように評価するか\n\n実際に実装し、運用すれば、そのうち性能がわかるが…\n\n遅すぎる場合も多い\n\n\nデータをランダム２分割(Training/Test)に分割し、Trainingデータのみでモデルを作り、Testで評価する\n典型的には、Testデータについて、平均二乗誤差 \\[(Y - 予測値)^2の平均値\\]",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>予測モデルの推定</span>"
    ]
  },
  {
    "objectID": "prediction.html#イメージ",
    "href": "prediction.html#イメージ",
    "title": "3  予測モデルの推定",
    "section": "3.7 イメージ",
    "text": "3.7 イメージ\n\n\n\n\n\n\n\n\n\n\nOriginal\nデータ\n\n\n\nData\n訓練データ {Y,X}\n\n\n\nOriginal-&gt;Data\n\n\nランダム分割\n\n\n\nNew\nテストデータ {Y,X}\n\n\n\nOriginal-&gt;New\n\n\n\n\n\nModel\n予測モデル g(X)\n\n\n\nData-&gt;Model\n\n\n推定\n\n\n\nNew-&gt;Model\n\n\n\n\n\nPredict\n予測値 Y^*\n\n\n\nModel-&gt;Predict\n\n\n\n\n\nPredict-&gt;New\n\n\nテスト",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>予測モデルの推定</span>"
    ]
  },
  {
    "objectID": "prediction.html#典型的誤解",
    "href": "prediction.html#典型的誤解",
    "title": "3  予測モデルの推定",
    "section": "3.8 典型的誤解",
    "text": "3.8 典型的誤解\n\n機械学習を用いて推定すれば、予測性能が高いモデルが獲得できる\n複雑な現象を予測するためには、複雑なモデルの方が望ましい\nBig dataを用いれば、理想的な予測モデルを推定できる\n予測性能が悪いモデルは、役に立たない",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>予測モデルの推定</span>"
    ]
  },
  {
    "objectID": "prediction.html#母集団を用いた整理",
    "href": "prediction.html#母集団を用いた整理",
    "title": "3  予測モデルの推定",
    "section": "3.9 母集団を用いた整理",
    "text": "3.9 母集団を用いた整理\n\n母集団: 論点整理を目的とした概念",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>予測モデルの推定</span>"
    ]
  },
  {
    "objectID": "prediction.html#母集団",
    "href": "prediction.html#母集団",
    "title": "3  予測モデルの推定",
    "section": "3.10 母集団",
    "text": "3.10 母集団\n\n手元のデータに含まれる事例は、母分布(集団)から抽出されたと想定する\n\n本講義では、ランダムに選ばれるケースに集中する\n\nRandom Sampling\n\n予測対象も、母分布からランダムに選ばれるとする\n\n一般にデータと母分布は、完全一致しない",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>予測モデルの推定</span>"
    ]
  },
  {
    "objectID": "prediction.html#例",
    "href": "prediction.html#例",
    "title": "3  予測モデルの推定",
    "section": "3.11 例",
    "text": "3.11 例\n\nユーザーの需要調査(どのようなサービスを望むか)\n\nデータ: サービス利用者の中からランダムに選ばれた200名 (例: 20代が2割)\n\n母集団: 全サービス利用者 (例: 20代が2.2割)\n予測対象: \\(X\\) (年齢など)のみ判明している利用者\n\n\n不動産取引価格の予測モデル\n\nデータ: 2022年第二四半期のすべての取引事例\n\n母集団: 潜在的な全取引\n予測対象: まだ取引されていない物件",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>予測モデルの推定</span>"
    ]
  },
  {
    "objectID": "prediction.html#イメージ-1",
    "href": "prediction.html#イメージ-1",
    "title": "3  予測モデルの推定",
    "section": "3.12 イメージ",
    "text": "3.12 イメージ\n\n\n\n\n\n\n\n\n\n\nPopulation\n母集団: 無数の事例 {Y,X}\n\n\n\nData\nデータ {Y,X}\n\n\n\nPopulation-&gt;Data\n\n\nランダム抽出\n\n\n\nNew\n新しい事例 {?,X}\n\n\n\nPopulation-&gt;New\n\n\n\n\n\nModel\n予測モデル g(X)\n\n\n\nData-&gt;Model\n\n\n\n\n\nNew-&gt;Model\n\n\n\n\n\nPredict\n予測値 Y^*\n\n\n\nModel-&gt;Predict",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>予測モデルの推定</span>"
    ]
  },
  {
    "objectID": "prediction.html#数値例-データ",
    "href": "prediction.html#数値例-データ",
    "title": "3  予測モデルの推定",
    "section": "3.13 数値例: データ",
    "text": "3.13 数値例: データ",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>予測モデルの推定</span>"
    ]
  },
  {
    "objectID": "prediction.html#数値例-予測モデル",
    "href": "prediction.html#数値例-予測モデル",
    "title": "3  予測モデルの推定",
    "section": "3.14 数値例: 予測モデル",
    "text": "3.14 数値例: 予測モデル",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>予測モデルの推定</span>"
    ]
  },
  {
    "objectID": "prediction.html#数値例-予測モデル-1",
    "href": "prediction.html#数値例-予測モデル-1",
    "title": "3  予測モデルの推定",
    "section": "3.15 数値例: 予測モデル",
    "text": "3.15 数値例: 予測モデル",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>予測モデルの推定</span>"
    ]
  },
  {
    "objectID": "prediction.html#数値例-予測モデルと母平均",
    "href": "prediction.html#数値例-予測モデルと母平均",
    "title": "3  予測モデルの推定",
    "section": "3.16 数値例: 予測モデルと母平均",
    "text": "3.16 数値例: 予測モデルと母平均\n\nここから想像の世界",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>予測モデルの推定</span>"
    ]
  },
  {
    "objectID": "prediction.html#不透明性-uncertainly",
    "href": "prediction.html#不透明性-uncertainly",
    "title": "3  予測モデルの推定",
    "section": "3.17 不透明性 (Uncertainly)",
    "text": "3.17 不透明性 (Uncertainly)\n\nデータ分析を含む事例分析の一般的課題\n\n独立した分析チームに同じ市場/社会の分析を依頼したとしても、同じ結論に到達し得ない\n\n誰がやっても、「水は100度で沸騰する」という結論を再現できる理科の実験とは対照的",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>予測モデルの推定</span>"
    ]
  },
  {
    "objectID": "prediction.html#sampling-model-uncertainly",
    "href": "prediction.html#sampling-model-uncertainly",
    "title": "3  予測モデルの推定",
    "section": "3.18 Sampling / Model Uncertainly",
    "text": "3.18 Sampling / Model Uncertainly\n\n観察する事例が人によって異なる (Sampling uncertainly)\n\n伝統的なデータ分析における主たる関心\n\n事例の要約方法(モデル化)が属人的で、不透明 (Model uncertainly)\n\n多くの教科書で直接的な言及を避けてきた問題\n\n「理論や背景をしっかり踏まえて、適切なモデル化を行うべし」以上の提案が難しい",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>予測モデルの推定</span>"
    ]
  },
  {
    "objectID": "prediction.html#sampling-uncertainlyの軽減",
    "href": "prediction.html#sampling-uncertainlyの軽減",
    "title": "3  予測モデルの推定",
    "section": "3.19 Sampling Uncertainlyの軽減",
    "text": "3.19 Sampling Uncertainlyの軽減\n\n問題: データから観察できない価格決定要因の”偏り”が、データ固有の特徴を生み出す\n対策: 多くの事例を集計(モデル化)し、傾向把握を行う\n\n初歩的な方法: よく似た労働者も高賃金を得ているか確認する",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>予測モデルの推定</span>"
    ]
  },
  {
    "objectID": "prediction.html#機械学習の利点",
    "href": "prediction.html#機械学習の利点",
    "title": "3  予測モデルの推定",
    "section": "3.20 機械学習の利点",
    "text": "3.20 機械学習の利点\n\n決定木を含む機械学習の手法は、明確な記述に基づくデータ主導のモデル化を行う\n\nModel Uncertainlyが軽減される",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>予測モデルの推定</span>"
    ]
  },
  {
    "objectID": "prediction.html#機械学習の問題点",
    "href": "prediction.html#機械学習の問題点",
    "title": "3  予測モデルの推定",
    "section": "3.21 機械学習の問題点",
    "text": "3.21 機械学習の問題点\n\nデータ主導のモデル生成は、Sampling uncertainlyを”複雑化”する\n\nデータに応じてモデルが大きく変化しうるため\n\n伝統的な理論的性質(中心極限定理など)が適用できず、信頼区間などが近似計算できない\n\n\\(Y\\) に近い値を得ることが目標である予測問題では、通常大きな問題にならない\nむしろモデル全体の予測性能を評価することが重要",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>予測モデルの推定</span>"
    ]
  },
  {
    "objectID": "prediction.html#数値例-決定木",
    "href": "prediction.html#数値例-決定木",
    "title": "3  予測モデルの推定",
    "section": "3.22 数値例: 決定木",
    "text": "3.22 数値例: 決定木\n\n4名の分析者(ID 1-4) が独立してデータを収集し、決定木でモデルを推定したとすると、",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>予測モデルの推定</span>"
    ]
  },
  {
    "objectID": "prediction.html#数値例-size-40-で分割",
    "href": "prediction.html#数値例-size-40-で分割",
    "title": "3  予測モデルの推定",
    "section": "3.23 数値例: Size \\(= 40\\) で分割",
    "text": "3.23 数値例: Size \\(= 40\\) で分割\n\n\n\n\n\n\n\n\n\n\nデータとは無関係に、size = 40 で予測値が”誤って”変化する",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>予測モデルの推定</span>"
    ]
  },
  {
    "objectID": "prediction.html#モデルの評価",
    "href": "prediction.html#モデルの評価",
    "title": "3  予測モデルの推定",
    "section": "3.24 モデルの評価",
    "text": "3.24 モデルの評価",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>予測モデルの推定</span>"
    ]
  },
  {
    "objectID": "prediction.html#予測モデルの評価-理想編",
    "href": "prediction.html#予測モデルの評価-理想編",
    "title": "3  予測モデルの推定",
    "section": "3.25 予測モデルの評価: 理想編",
    "text": "3.25 予測モデルの評価: 理想編\n\nどんな予測もまぐれあたりしうる\n\n平均的にうまく行くモデルを採用したい\n\n予測モデルを母分布に適用して評価する: 典型的には二乗誤差の母平均値を用いる \\(E[(Y - g(X))^2]\\)",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>予測モデルの推定</span>"
    ]
  },
  {
    "objectID": "prediction.html#予測モデルの評価-現実編",
    "href": "prediction.html#予測モデルの評価-現実編",
    "title": "3  予測モデルの推定",
    "section": "3.26 予測モデルの評価: 現実編",
    "text": "3.26 予測モデルの評価: 現実編\n\n母分布は観察できないので、母分布に適用した際の予測性能は”推定する必要”がある\n\n母分布からランダムに選ばれた事例でテストしたい\n\n最も典型的な評価法は、データ分割: データをランダムに2分割 (訓練/テストデータ)し、訓練データのみでモデルを推定し、テストデータで評価",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>予測モデルの推定</span>"
    ]
  },
  {
    "objectID": "prediction.html#イメージ-2",
    "href": "prediction.html#イメージ-2",
    "title": "3  予測モデルの推定",
    "section": "3.27 イメージ",
    "text": "3.27 イメージ\n\n\n\n\n\n\n\n\n\n\nPopulation\n母集団: 無数の事例 {Y,X}\n\n\n\nOriginal\nデータ\n\n\n\nPopulation-&gt;Original\n\n\nランダム抽出\n\n\n\nData\n訓練データ {Y,X}\n\n\n\nOriginal-&gt;Data\n\n\nランダム分割\n\n\n\nNew\nテストデータ {Y,X}\n\n\n\nOriginal-&gt;New\n\n\n\n\n\nModel\n予測モデル g(X)\n\n\n\nData-&gt;Model\n\n\n\n\n\nNew-&gt;Model\n\n\n\n\n\nPredict\n予測値 Y^*\n\n\n\nModel-&gt;Predict\n\n\n\n\n\nPredict-&gt;New\n\n\nテスト",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>予測モデルの推定</span>"
    ]
  },
  {
    "objectID": "prediction.html#補論-モデルを使い続けられるか",
    "href": "prediction.html#補論-モデルを使い続けられるか",
    "title": "3  予測モデルの推定",
    "section": "3.28 補論: モデルを使い続けられるか?",
    "text": "3.28 補論: モデルを使い続けられるか?\n\nモデル推定に用いるデータの母分布と、予測対象の母分布が異なれば、予測性能は悪化する\n\n高性能モデルでも、時代の変化/大きな社会的ショックの発生等の結果、性能が悪化しうる\n\n通常の設備と同様に、経年劣化/破壊されうる\n\n\n定期的に予測性能を計り直し、再推定する必要がある\n\nConcept-Driftと呼ばれる",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>予測モデルの推定</span>"
    ]
  },
  {
    "objectID": "prediction.html#極端なモデルの推定",
    "href": "prediction.html#極端なモデルの推定",
    "title": "3  予測モデルの推定",
    "section": "3.29 極端なモデルの推定",
    "text": "3.29 極端なモデルの推定\n\n予測モデルの推定の原理を理解するために、極端な推定方法で何が生じるのか理解する",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>予測モデルの推定</span>"
    ]
  },
  {
    "objectID": "prediction.html#理想の予測モデル",
    "href": "prediction.html#理想の予測モデル",
    "title": "3  予測モデルの推定",
    "section": "3.30 理想の予測モデル",
    "text": "3.30 理想の予測モデル\n\nもし母集団をすべて活用して、モデル推定できるのであれば、理想の予測モデルは母平均 \\(E[Y|X]\\)\n\n予測誤差を平均二乗誤差で測定するのが前提\n\n「各グループ内での平均的傾向」よりも優れた予測はあり得ない",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>予測モデルの推定</span>"
    ]
  },
  {
    "objectID": "prediction.html#完璧な予測は可能か",
    "href": "prediction.html#完璧な予測は可能か",
    "title": "3  予測モデルの推定",
    "section": "3.31 完璧な予測は可能か?",
    "text": "3.31 完璧な予測は可能か?\n\n予測不可能な部分 \\(Y - E[Y|X]\\) が発生\n\n削減不可能な誤差\n\n予測対象となる母集団(社会)、\\(Y/X\\) が決まった時点で自動的に定まる\n\n\\(X\\) 内で個人差がある現象の予測は難しい\n\n人間行動やその相互作用で決まる現象 (例: 消費、貯蓄、出生、就業、賃金、等)は大きい傾向",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>予測モデルの推定</span>"
    ]
  },
  {
    "objectID": "prediction.html#予測モデルの推定-現実",
    "href": "prediction.html#予測モデルの推定-現実",
    "title": "3  予測モデルの推定",
    "section": "3.32 予測モデルの推定: 現実",
    "text": "3.32 予測モデルの推定: 現実\n\n母集団は観察できないので、データで置き換える必要がある\n\n単純なモデルを推定すると、母平均の複雑さを捉えられない\n複雑なモデルを推定すると、データが偶然持った特徴を母平均の特徴と混同してしまう",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>予測モデルの推定</span>"
    ]
  },
  {
    "objectID": "prediction.html#現実的な方法-単純平均法",
    "href": "prediction.html#現実的な方法-単純平均法",
    "title": "3  予測モデルの推定",
    "section": "3.33 現実的な方法: 単純平均法",
    "text": "3.33 現実的な方法: 単純平均法\n\n単純な平均取引価格を予測値とする",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>予測モデルの推定</span>"
    ]
  },
  {
    "objectID": "prediction.html#現実的な方法-丸暗記法",
    "href": "prediction.html#現実的な方法-丸暗記法",
    "title": "3  予測モデルの推定",
    "section": "3.34 現実的な方法: 丸暗記法",
    "text": "3.34 現実的な方法: 丸暗記法\n\n各\\(X\\) について、データ上の平均値を予測値とする",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>予測モデルの推定</span>"
    ]
  },
  {
    "objectID": "prediction.html#複雑なモデルは望ましいのか",
    "href": "prediction.html#複雑なモデルは望ましいのか",
    "title": "3  予測モデルの推定",
    "section": "3.35 複雑なモデルは望ましいのか?",
    "text": "3.35 複雑なモデルは望ましいのか?\n\n丸暗記モデルは非常に複雑なモデルを生み出し、望ましいように思える\n\n現実は複雑\n推定に用いたデータとの矛盾はない\n\n予測値とデータ上の平均値は、必ず一致する\n\n\n一般に予測性能は極めて悪い\n\n少数の事例のみで計算れた平均値は、\\(X\\) 以外の決定要因の偏りを反映してしまう",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>予測モデルの推定</span>"
    ]
  },
  {
    "objectID": "prediction.html#補論-丸暗記が有効な場合",
    "href": "prediction.html#補論-丸暗記が有効な場合",
    "title": "3  予測モデルの推定",
    "section": "3.36 補論: 丸暗記が有効な場合",
    "text": "3.36 補論: 丸暗記が有効な場合\n\n\\(X\\) 以外に \\(Y\\) の決定要因がなければ、丸暗記は有効\n\n例: 判例予測、コンピュータの動作予測\n\n人間行動については、\\(X\\) 以外の無数の決定要因が存在\n\n例: “双子”でも違う人生を歩む\n丸暗記に向いていない",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>予測モデルの推定</span>"
    ]
  },
  {
    "objectID": "prediction.html#中庸なモデルの推定",
    "href": "prediction.html#中庸なモデルの推定",
    "title": "3  予測モデルの推定",
    "section": "3.37 中庸なモデルの推定",
    "text": "3.37 中庸なモデルの推定\n\n多くの応用で平均値は単純すぎ、丸暗記は複雑すぎる\n決定木については、最大分割回数などを変更することで、単純平均と丸暗記法の間を移行できる",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>予測モデルの推定</span>"
    ]
  },
  {
    "objectID": "prediction.html#モデル選択集計",
    "href": "prediction.html#モデル選択集計",
    "title": "3  予測モデルの推定",
    "section": "3.38 モデル選択/集計",
    "text": "3.38 モデル選択/集計\n\n決定木の深さが異なれば、予測モデルは異なる\n複数のモデルを”試作”し、予測性能を測定、最も性能が良いモデルを選ぶのは一つの方法\n決定木については、複数のモデルを試作し、その予測結果を集計することがより有効な場合が多い\n\nモデル集計/アンサンブル法などと呼ばれる",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>予測モデルの推定</span>"
    ]
  },
  {
    "objectID": "prediction.html#概要",
    "href": "prediction.html#概要",
    "title": "3  予測モデルの推定",
    "section": "3.39 概要",
    "text": "3.39 概要\n\n複雑なモデルを推定すると、母平均から大きく乖離した事例(ハズレ値)の影響を強く受ける\n\n予測結果を安定されるために、大量の予測モデルを作り、その平均値を最終予測とすることが有効 (Bagging)\n一部の変数の使用を確率的に禁止することも併用できる (RandomForest)",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>予測モデルの推定</span>"
    ]
  },
  {
    "objectID": "prediction.html#イメージ-bagging",
    "href": "prediction.html#イメージ-bagging",
    "title": "3  予測モデルの推定",
    "section": "3.40 イメージ: Bagging",
    "text": "3.40 イメージ: Bagging\n\nBootstrap法を用いて、予測モデルを大量に作る (500-5000個程度)\n\n\n\n\n\n\n\n\n\n\n\nData\n訓練データ\n[Y={10,2,4},X={5,7,1}]\n\n\n\nBoot1\n複製データ1\n[Y={2,2,4},X={7,7,1}]\n\n\n\nData-&gt;Boot1\n\n\n\n\n\nBoot2\n複製データ2\n[Y={10,2,2},X={5,7,7}]\n\n\n\nData-&gt;Boot2\n\n\n\n\n\nBoot3\n複製データ3\n[Y={10,10,4},X={5,5,1}]\n\n\n\nData-&gt;Boot3\n\n\n\n\n\nModel1\n予測モデル1 \ng1(X)\n\n\n\nBoot1-&gt;Model1\n\n\n\n\n\nModel2\n予測モデル2 \ng2(X)\n\n\n\nBoot2-&gt;Model2\n\n\n\n\n\nModel3\n予測モデル3 \ng3(X)\n\n\n\nBoot3-&gt;Model3\n\n\n\n\n\nSummary\n平均\n\n\n\nModel1-&gt;Summary\n\n\n\n\n\nModel2-&gt;Summary\n\n\n\n\n\nModel3-&gt;Summary\n\n\n\n\n\nPrediction\n最終予測\n\n\n\nSummary-&gt;Prediction",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>予測モデルの推定</span>"
    ]
  },
  {
    "objectID": "prediction.html#randomforest-の利点",
    "href": "prediction.html#randomforest-の利点",
    "title": "3  予測モデルの推定",
    "section": "3.41 RandomForest の利点",
    "text": "3.41 RandomForest の利点\n\nBootstrapは、“ハズレ値”を含まないデータとそれを用いたモデルも生成される\n\nハズレ値の影響を軽減できる\n\n変数の一部を確率的に使用できなくすることで、モデル間で用いる変数の多様性が促進される\n\nより多くの変数の情報が活用できる\n\n注: 実際にはモデル単位ではなく、サンプル分割ごとに、(元々の変数数のsquare root個)ランダムに使用禁止する",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>予測モデルの推定</span>"
    ]
  },
  {
    "objectID": "prediction.html#数値例-random-forest",
    "href": "prediction.html#数値例-random-forest",
    "title": "3  予測モデルの推定",
    "section": "3.42 数値例: Random Forest",
    "text": "3.42 数値例: Random Forest",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>予測モデルの推定</span>"
    ]
  },
  {
    "objectID": "prediction.html#big-dataは優れた予測モデルを保証するか",
    "href": "prediction.html#big-dataは優れた予測モデルを保証するか",
    "title": "3  予測モデルの推定",
    "section": "3.43 Big dataは優れた予測モデルを保証するか?",
    "text": "3.43 Big dataは優れた予測モデルを保証するか?\n\n「Big data \\(=\\) サンプルサイズが多い」、のであれば、完璧な予測モデル \\(g(X) = Y\\) を保証しない\n\n削減不可能な誤差 \\(Y - E[Y|X]\\) が存在するため\n\n理想的な予測モデル \\(g(X) = E[Y|X]\\) は保証できるか?\n\n伝統的な方法 \\(=\\) 極めて強い仮定のもとでのみ可能\n多くの機械学習 \\(=\\) 緩やかな仮定で可能",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>予測モデルの推定</span>"
    ]
  },
  {
    "objectID": "prediction.html#数値例-伝統的アプローチ5000事例",
    "href": "prediction.html#数値例-伝統的アプローチ5000事例",
    "title": "3  予測モデルの推定",
    "section": "3.44 数値例: 伝統的アプローチ(5000事例)",
    "text": "3.44 数値例: 伝統的アプローチ(5000事例)\n\n研究者が、「Size \\(= 40\\) で分割する」と決定\n\n推定されうるモデルを限定する",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>予測モデルの推定</span>"
    ]
  },
  {
    "objectID": "prediction.html#数値例-random-forest-with-large-sample-5000事例",
    "href": "prediction.html#数値例-random-forest-with-large-sample-5000事例",
    "title": "3  予測モデルの推定",
    "section": "3.45 数値例: Random Forest with large sample (5000事例)",
    "text": "3.45 数値例: Random Forest with large sample (5000事例)",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>予測モデルの推定</span>"
    ]
  },
  {
    "objectID": "prediction.html#まとめ",
    "href": "prediction.html#まとめ",
    "title": "3  予測モデルの推定",
    "section": "3.46 まとめ",
    "text": "3.46 まとめ\n\n実際/理想/完璧な予測モデルの区別が重要\n理想の予測モデル: \\(g(X)=E[Y|X]\\)\n\n個人差があれば、完璧な予測 \\(g(X)=Y\\) は不可能\n\n限られたデータから推定されたモデルは、理想の予測モデルとはならない \\(g(X)\\neq E[Y|X]\\)\n\n機械学習を用いて、近づけることは可能\n\n予測に使う前に、テストデータを用いた性能調査が必須",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>予測モデルの推定</span>"
    ]
  },
  {
    "objectID": "prediction.html#reference",
    "href": "prediction.html#reference",
    "title": "3  予測モデルの推定",
    "section": "3.47 Reference",
    "text": "3.47 Reference",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>予測モデルの推定</span>"
    ]
  },
  {
    "objectID": "simplecomparison.html",
    "href": "simplecomparison.html",
    "title": "4  単純な比較分析",
    "section": "",
    "text": "4.1 実例",
    "crumbs": [
      "<span class='chapter-number'>4</span>  <span class='chapter-title'>単純な比較分析</span>"
    ]
  },
  {
    "objectID": "simplecomparison.html#実例",
    "href": "simplecomparison.html#実例",
    "title": "4  単純な比較分析",
    "section": "",
    "text": "１年前と比べた労働市場/社会の状況変化\n雇用形態間の所得格差\n\n\n4.1.1 OLS\n\n\n\n\n\n\n\n\n\n\nX\nD\n\n\n\nf_Y\n「未知の」メカニズム\n\n\n\nX-&gt;f_Y\n\n\n\n\n\ng_Y\nシンプルなモデル\n\n\n\nX-&gt;g_Y\n\n\n\n\n\nY\nY\n\n\n\nf_Y-&gt;Y\n\n\n\n\n\nf_Y-&gt;g_Y\n\n\n特徴を反映\n\n\n\ng_Y-&gt;Y\n\n\n\n\n\nEst\n推定\n\n\n\ng_Y-&gt;Est",
    "crumbs": [
      "<span class='chapter-number'>4</span>  <span class='chapter-title'>単純な比較分析</span>"
    ]
  },
  {
    "objectID": "simplecomparison.html#平均の比較",
    "href": "simplecomparison.html#平均の比較",
    "title": "4  単純な比較分析",
    "section": "4.2 平均の比較",
    "text": "4.2 平均の比較\n\n２種類の方法が考えられる\n\n“Yの特徴を調べる”: \\(D=1/0\\) それぞれについて、\\(Y\\) の平均値を計算し、差をとる\n\nデータと推定結果の関連性について近似的な性質(中心極限定理 など)が成り立つ\n信頼区間が計算でき、強く推奨\n\n“予測モデルの特徴を調べる”: \\(D=1/0\\) それぞれについて、予測値の平均値を計算し、差をとる\n\nデータと推定結果の関連性が複雑で、Blackbox\nバイアスが生じ、信頼区間の計算も難しく、非推奨",
    "crumbs": [
      "<span class='chapter-number'>4</span>  <span class='chapter-title'>単純な比較分析</span>"
    ]
  },
  {
    "objectID": "simplecomparison.html#信頼区間",
    "href": "simplecomparison.html#信頼区間",
    "title": "4  単純な比較分析",
    "section": "4.3 信頼区間",
    "text": "4.3 信頼区間\n\nデータ上の(単純)平均値であったとしても、データの偶然の偏り(Sampling Uncertainly)の影響を受ける\n\n一般に、データから得た推定値 \\(\\neq\\) 母平均\n\n信頼区間 \\(=\\) 一定の確率(多くの初期設定で 95 \\(\\%\\)) で、母平均を含む区間\n\n\\(Y\\) の平均値を推定値とするのであれば、事例数がある程度大きい (\\(\\simeq\\) 200 以上)であれば、近似計算が可能\n\\(Y\\) の予測値の平均値を用いる場合、計算方法が確立されていない\n\n\n\n4.3.1 信頼区間の重要性\n\nマクロな意思決定は、取り返しがつかない/幅広い層に影響を与えるものが多い\n判断材料となる情報にも、高い信頼性/透明性が求められる\n\nSampling Uncertainlyのせいで、点推定値は “100\\(\\%\\)” 間違えている\n\nとくに少数グループについて、母平均からかけ離れた値が推定されがち\n“推定誤差” を常に考慮する必要がある",
    "crumbs": [
      "<span class='chapter-number'>4</span>  <span class='chapter-title'>単純な比較分析</span>"
    ]
  },
  {
    "objectID": "simplecomparison.html#まとめ",
    "href": "simplecomparison.html#まとめ",
    "title": "4  単純な比較分析",
    "section": "4.4 まとめ",
    "text": "4.4 まとめ\n\nある程度の事例数を活用し、シンプルな平均値やその差を推定したのであれば、計量経済学の入門書で紹介される「平均値の推定」法が実用的\n\n事例数が非常に少ないケース (30以下など)であれば、ベイズ法なども有力",
    "crumbs": [
      "<span class='chapter-number'>4</span>  <span class='chapter-title'>単純な比較分析</span>"
    ]
  },
  {
    "objectID": "simplecomparison.html#補論-統計モデルの推定",
    "href": "simplecomparison.html#補論-統計モデルの推定",
    "title": "4  単純な比較分析",
    "section": "4.5 補論: 統計モデルの推定",
    "text": "4.5 補論: 統計モデルの推定\n\n平均差による母平均の差の推定結果は、以下の母平均のモデルをOLSで推定した結果と一致する \\[Y=\\beta_0 + \\underbrace{\\beta_1}_{=E[Y|D=1] - E[Y|D=0]}D + \\underbrace{u}_{E[u|D=1]=E[u|D=0]=0}\\]\n\n\\(\\beta_1=\\) Parameter of interest\n\n「母集団の信頼できる統計モデルのパラメタを推定する」方法として、教科書では紹介されてきた\n\n研究関心が複雑になると信頼できるモデルを構築するのが難しくなる",
    "crumbs": [
      "<span class='chapter-number'>4</span>  <span class='chapter-title'>単純な比較分析</span>"
    ]
  },
  {
    "objectID": "complexcomparison.html",
    "href": "complexcomparison.html",
    "title": "5  複雑な比較分析",
    "section": "",
    "text": "5.1 アプローチ",
    "crumbs": [
      "<span class='chapter-number'>5</span>  <span class='chapter-title'>複雑な比較分析</span>"
    ]
  },
  {
    "objectID": "complexcomparison.html#アプローチ",
    "href": "complexcomparison.html#アプローチ",
    "title": "5  複雑な比較分析",
    "section": "",
    "text": "伝統的には、重回帰分析を用いた分析 \\(Y\\sim D + X_1+..\\) が行われてきた\n\n今でも有効だが、モデルの定式化に結果が依存してしまう問題がある\n\n機械学習とOLSの併用が有効\n\nTarget/Debiased learning(Van der Laan, Rose, et al. 2011; Chernozhukov et al. 2018, 2022)\n\nCausalMLBookの1,4,10章に相当",
    "crumbs": [
      "<span class='chapter-number'>5</span>  <span class='chapter-title'>複雑な比較分析</span>"
    ]
  },
  {
    "objectID": "complexcomparison.html#変化の分解",
    "href": "complexcomparison.html#変化の分解",
    "title": "5  複雑な比較分析",
    "section": "5.2 変化の分解",
    "text": "5.2 変化の分解\n\n\\(E[Y|D=1] - E[Y|D=0] = Y\\) の平均値の差\n通常、 \\(Y\\) 以外の変数 \\(X\\) についても、\\(D\\) 間で差が存在する\n\\(X\\) について差がなかった(バランスさせた)場合に、 \\(Y\\) についてどの程度差が存在するのか \\(?\\)",
    "crumbs": [
      "<span class='chapter-number'>5</span>  <span class='chapter-title'>複雑な比較分析</span>"
    ]
  },
  {
    "objectID": "complexcomparison.html#例.-出生率",
    "href": "complexcomparison.html#例.-出生率",
    "title": "5  複雑な比較分析",
    "section": "5.3 例. 出生率",
    "text": "5.3 例. 出生率\n\n出生の動向を把握する上で、新生児数を年次比較する\n\n成人の年齢構造の変化を無視している\n\n50年前よりも、高齢者の比率が高い\n\n\n合計特殊出生率\n\n「年齢構造が同じであった場合の」出生率はどのように変化を議論できる\n\n学歴や家族構成などもバランスさせることは可能か？",
    "crumbs": [
      "<span class='chapter-number'>5</span>  <span class='chapter-title'>複雑な比較分析</span>"
    ]
  },
  {
    "objectID": "complexcomparison.html#例.-既存店ベースの比較",
    "href": "complexcomparison.html#例.-既存店ベースの比較",
    "title": "5  複雑な比較分析",
    "section": "5.4 例. 既存店ベースの比較",
    "text": "5.4 例. 既存店ベースの比較\n\nあるコンビニチェーンで、店舗あたりの平均売り上げが1000万円増大した \\[E[Y|D=1] - E[Y|D=0]= 1000万円\\]\n去年から今年にかけて、新規出店が大きく増加した\n\n売り上げが大きくなる傾向のある新規店の割合が大きく、結果、平均売り上げが増大したのではないか?\n\n既存店 (\\(=X\\)) に絞って、比較する",
    "crumbs": [
      "<span class='chapter-number'>5</span>  <span class='chapter-title'>複雑な比較分析</span>"
    ]
  },
  {
    "objectID": "complexcomparison.html#例.-客層",
    "href": "complexcomparison.html#例.-客層",
    "title": "5  複雑な比較分析",
    "section": "5.5 例. 客層",
    "text": "5.5 例. 客層\n\nあるコンビニチェーンで、大手町店と本郷三丁目店で、客単価が大きく異なる\n\n客層の違いに起因しているのではないか?\n\n本郷三丁目の方が、大学生が多い等\n\n\n来客の年齢や職業 (\\(=X\\)) の分布を仮想的に揃えて、比較する",
    "crumbs": [
      "<span class='chapter-number'>5</span>  <span class='chapter-title'>複雑な比較分析</span>"
    ]
  },
  {
    "objectID": "complexcomparison.html#例.-因果推論",
    "href": "complexcomparison.html#例.-因果推論",
    "title": "5  複雑な比較分析",
    "section": "5.6 例. 因果推論",
    "text": "5.6 例. 因果推論\n\nコンビニの改装が平均的にどの程度、平均売上を上昇させるのか\n\n「改装するかどうかの意思決定、および価格に影響を与える変数」(Confounders)が\\(D\\)間で偏る\nデータから観察できる Confoundersについては、分布を揃える必要がある\n(発展) 観察できないConfoundersへの対処は?\n\n統計的因果推論にて多くの議論が蓄積",
    "crumbs": [
      "<span class='chapter-number'>5</span>  <span class='chapter-title'>複雑な比較分析</span>"
    ]
  },
  {
    "objectID": "complexcomparison.html#理想的な推定方法",
    "href": "complexcomparison.html#理想的な推定方法",
    "title": "5  複雑な比較分析",
    "section": "5.7 理想的な推定方法",
    "text": "5.7 理想的な推定方法\n\n全ての\\(X\\)の組み合わせについて、平均差 \\(E[Y|D=1,X] - E[Y|D=0,X]\\) を計算する\n\n\\(X\\) の値が一致している事例内で比較\n\n問題点: \\(X\\) の組み合わせが増えると、サブグループ内での事例数が極端に小さくなり、実行不可能\n\n多くの応用で非現実的",
    "crumbs": [
      "<span class='chapter-number'>5</span>  <span class='chapter-title'>複雑な比較分析</span>"
    ]
  },
  {
    "objectID": "complexcomparison.html#residual-learner",
    "href": "complexcomparison.html#residual-learner",
    "title": "5  複雑な比較分析",
    "section": "5.8 R(esidual)-learner",
    "text": "5.8 R(esidual)-learner\n\n\\(X\\) を \\(D\\) 間でバランスさせた元での比較を行うために、以下の手順を実行する\n\n\nデータを2分割する (訓練/テスト)\n訓練データを用いて、\\(X\\) から \\(Y/D\\) を予測するモデル \\(g_Y(X)/g_D(X)\\) を推定する\nテストデータを用いて、\\(Y/D\\)の予測誤差をOLSで回帰し係数 \\(\\beta_D\\) を推定値とする \\[Y-g_Y(X)\\sim D - g_D(X)\\]\n\n\n後日、より効率的なサンプル分割方法(交差推定)を紹介",
    "crumbs": [
      "<span class='chapter-number'>5</span>  <span class='chapter-title'>複雑な比較分析</span>"
    ]
  },
  {
    "objectID": "complexcomparison.html#直感",
    "href": "complexcomparison.html#直感",
    "title": "5  複雑な比較分析",
    "section": "5.9 直感",
    "text": "5.9 直感\n\n\\(X\\) の偏りを排除したい\n\n\n\n\n\n\n\n\n\n\n\nY\nY\n\n\n\nD\nD\n\n\n\nY-&gt;D\n\n\n\n\n\nf_Y\nblackbox\n\n\n\nY-&gt;f_Y\n\n\n\n\n\nY-&gt;f_Y\n\n\n\n\n\nX\nX\n\n\n\nf_D\nblackbox\n\n\n\nX-&gt;f_D\n\n\n\n\n\nX-&gt;f_D\n\n\n\n\n\nf_Y-&gt;X\n\n\n\n\n\nf_Y-&gt;X\n\n\n\n\n\nf_D-&gt;D\n\n\n\n\n\nf_D-&gt;D",
    "crumbs": [
      "<span class='chapter-number'>5</span>  <span class='chapter-title'>複雑な比較分析</span>"
    ]
  },
  {
    "objectID": "complexcomparison.html#直感-1",
    "href": "complexcomparison.html#直感-1",
    "title": "5  複雑な比較分析",
    "section": "5.10 直感",
    "text": "5.10 直感\n\n予測モデルにより、\\(X\\) の偏りの影響を評価する\n\n\n\n\n\n\n\n\n\n\n\nY\nY\n\n\n\nf_Y\nblackbox\n\n\n\nY-&gt;f_Y\n\n\n\n\n\nY-&gt;f_Y\n\n\n\n\n\nD\nD\n\n\n\nX\nX\n\n\n\nf_D\nblackbox\n\n\n\nX-&gt;f_D\n\n\n\n\n\nX-&gt;f_D\n\n\n\n\n\nf_Y-&gt;X\n\n\n\n\n\nf_Y-&gt;X\n\n\n\n\n\ng_Y\ng_Y(X)\n\n\n\nf_Y-&gt;g_Y\n\n\n置き換え\n\n\n\nf_D-&gt;D\n\n\n\n\n\nf_D-&gt;D\n\n\n\n\n\ng_D\ng_D(X)\n\n\n\nf_D-&gt;g_D\n\n\n置き換え",
    "crumbs": [
      "<span class='chapter-number'>5</span>  <span class='chapter-title'>複雑な比較分析</span>"
    ]
  },
  {
    "objectID": "complexcomparison.html#例-基本アイディア",
    "href": "complexcomparison.html#例-基本アイディア",
    "title": "5  複雑な比較分析",
    "section": "5.11 例: 基本アイディア",
    "text": "5.11 例: 基本アイディア\n\n事例1と４の間で、\\(700\\) 万円近くの 以上の価格格差\n\\(X\\) が大きく異なる\n\n(\\(X\\) からの)予測値についても、同程度の格差\n\n実際の格差から、(\\(X\\)の影響を捉える) 予測値の差を引くと ほとんど格差はない",
    "crumbs": [
      "<span class='chapter-number'>5</span>  <span class='chapter-title'>複雑な比較分析</span>"
    ]
  },
  {
    "objectID": "complexcomparison.html#直感-2",
    "href": "complexcomparison.html#直感-2",
    "title": "5  複雑な比較分析",
    "section": "5.12 直感",
    "text": "5.12 直感\n\n価格 \\(=\\) 取引年 \\(+\\) \\(X\\) の影響 \\(+\\) その他\n予測モデルが\\(X\\) の影響を完全に捉え、その他の影響がなければ、 \\[\\underbrace{Y_1 - Y_2}_{事例1と2の賃金格差}-\\underbrace{g_Y(X_1) - g_Y(X_2)}_{予測格差}\\] \\[=\\underbrace{Y_1 - g_Y(X_1)}_{1についての予測誤差} - \\underbrace{(Y_2 - g_Y(X_2))}_{2についての予測誤差}\\] は、バランス後の賃金格差を捉える",
    "crumbs": [
      "<span class='chapter-number'>5</span>  <span class='chapter-title'>複雑な比較分析</span>"
    ]
  },
  {
    "objectID": "complexcomparison.html#直感-3",
    "href": "complexcomparison.html#直感-3",
    "title": "5  複雑な比較分析",
    "section": "5.13 直感",
    "text": "5.13 直感\n\nその他の影響は、当然存在する\n個別事例について、影響を排除することは困難\n大量の事例の平均をとることで、平均格差を明らかにする \\[\\underbrace{E[Y - g_Y(X)|D=1]}_{D=1についての平均予測誤差} - \\underbrace{E[Y - g_Y(X)|D=0]}_{D=0についての平均予測誤差}\\]\n\\(g_Y(X)=E[Y|X]\\) であれば、バランス後の平均格差の優れた推定値",
    "crumbs": [
      "<span class='chapter-number'>5</span>  <span class='chapter-title'>複雑な比較分析</span>"
    ]
  },
  {
    "objectID": "complexcomparison.html#直感-4",
    "href": "complexcomparison.html#直感-4",
    "title": "5  複雑な比較分析",
    "section": "5.14 直感",
    "text": "5.14 直感\n\n限られた事例から推定された予測モデルは、理想的なものと乖離する: \\(g_Y(X)\\neq E[Y|X]\\)\n\n格差の推定値に、予測困難な悪影響を与える\n\n\\(D\\) の予測モデル \\(g_D(X)\\) も併用する\n\n\\(X\\) が \\(D\\) に与える影響も極力排除する\n\n\\(Y\\) の予測誤差 \\(Y-g_Y(X)\\) を \\(D\\) の予測誤差 \\(D-g_D(X)\\) で回帰する",
    "crumbs": [
      "<span class='chapter-number'>5</span>  <span class='chapter-title'>複雑な比較分析</span>"
    ]
  },
  {
    "objectID": "complexcomparison.html#double-debaised-machine-learning",
    "href": "complexcomparison.html#double-debaised-machine-learning",
    "title": "5  複雑な比較分析",
    "section": "5.15 Double Debaised Machine Learning",
    "text": "5.15 Double Debaised Machine Learning\n\nR learnerは、Double/Debiased Machine Learningと呼ばれる手法の一つ\n最終的にはOLSや平均値などで推定する\n\n予測モデルの不完全性 (AIのミス) の悪影響を、複数の予測モデルを組み合わせることで減らす\n予測モデルが同時に母平均から大きく乖離しなければOK (“AIによるDouble Check”)",
    "crumbs": [
      "<span class='chapter-number'>5</span>  <span class='chapter-title'>複雑な比較分析</span>"
    ]
  },
  {
    "objectID": "complexcomparison.html#推定値の性質",
    "href": "complexcomparison.html#推定値の性質",
    "title": "5  複雑な比較分析",
    "section": "5.16 推定値の性質",
    "text": "5.16 推定値の性質\n\n\\(g_Y(X),g_D(X)\\) が \\(E[Y|X],E[D|X]\\) をある程度近似できるのであれば (後述)、近似的な信頼区間を計算可能\n\n十分な事例数 (私見では500事例以上)\n適した推定方法の採用 (後日議論)\n\n注: \\(Y,D\\) を高い精度で予測する必要はない\n\n個人差が大きく予測しにくい現象であったとしても、比較分析への活用においては、予測モデルは有益",
    "crumbs": [
      "<span class='chapter-number'>5</span>  <span class='chapter-title'>複雑な比較分析</span>"
    ]
  },
  {
    "objectID": "complexcomparison.html#補論-olsとの比較",
    "href": "complexcomparison.html#補論-olsとの比較",
    "title": "5  複雑な比較分析",
    "section": "5.17 補論: OLSとの比較",
    "text": "5.17 補論: OLSとの比較\n\n「\\(X\\) の分布を均した後の比較」を行う伝統的方法は、以下のモデルを重回帰する \\[E[Y|D,X]=\\beta_0 + \\beta_D D + \\beta_1X_1+...\\]\nFWL定理 (wiki)より、R-leanerの特殊ケースと見做せる",
    "crumbs": [
      "<span class='chapter-number'>5</span>  <span class='chapter-title'>複雑な比較分析</span>"
    ]
  },
  {
    "objectID": "complexcomparison.html#補論-olsとの比較-1",
    "href": "complexcomparison.html#補論-olsとの比較-1",
    "title": "5  複雑な比較分析",
    "section": "5.18 補論: OLSとの比較",
    "text": "5.18 補論: OLSとの比較\n\nFWL定理より、OLSの推定結果 \\(\\beta_D\\) は、以下の手順により得られる推定結果と一致\n\n\n全データ を用いて、 OLS で予測モデル \\(g_Y(X)=\\beta_0 + \\beta_1X_1+..., g_D(X)=\\alpha_0+\\alpha_1X_1+..\\) を推定\n以下はR-learnerと同じ手順\n\n\n予測モデルの定式化が正しく、かつ事例数に比べて十分に単純 (\\(\\beta\\) の数が少ない)のであれば、優れた推定方法だが、そうではない応用例も多い",
    "crumbs": [
      "<span class='chapter-number'>5</span>  <span class='chapter-title'>複雑な比較分析</span>"
    ]
  },
  {
    "objectID": "complexcomparison.html#補論-統計モデルとしての書き換え",
    "href": "complexcomparison.html#補論-統計モデルとしての書き換え",
    "title": "5  複雑な比較分析",
    "section": "5.19 補論: 統計モデルとしての書き換え",
    "text": "5.19 補論: 統計モデルとしての書き換え\n\nR-learnerの推定結果は、以下のモデルを推定した場合の結果と一致 (Robinson 1988) \\[Y=\\tau D + \\underbrace{f(X)}_{何らかの(blackboxな)関数} + \\underbrace{u}_{E[u|D,X]=0}\\]\n\n教科書的な線形モデル: 「\\(f(X)=\\beta_0 + \\beta_1X_1 +..\\) と特定化しても \\(E[u|D,X]=0\\) が成り立つ」という仮定を追加",
    "crumbs": [
      "<span class='chapter-number'>5</span>  <span class='chapter-title'>複雑な比較分析</span>"
    ]
  },
  {
    "objectID": "complexcomparison.html#まとめ",
    "href": "complexcomparison.html#まとめ",
    "title": "5  複雑な比較分析",
    "section": "5.20 まとめ",
    "text": "5.20 まとめ\n\nシンプルな比較分析であれば、伝統的な推定方法が有効\n複雑な比較分析、ここでは \\(X\\) をバランスさせた後での比較、においては機械学習も併用することで、分析の信頼性を改善できる\n\nOLSなどと比べて、推定結果が大きく変わらなかったとしても、分析の頑強性の確認ができる",
    "crumbs": [
      "<span class='chapter-number'>5</span>  <span class='chapter-title'>複雑な比較分析</span>"
    ]
  },
  {
    "objectID": "complexcomparison.html#reference",
    "href": "complexcomparison.html#reference",
    "title": "5  複雑な比較分析",
    "section": "5.21 Reference",
    "text": "5.21 Reference\n\n\n\n\nChernozhukov, Victor, Denis Chetverikov, Mert Demirer, Esther Duflo, Christian Hansen, Whitney Newey, and James Robins. 2018. “Double/debiased machine learning for treatment and structural parameters.” The Econometrics Journal 21 (1): C1–68. https://doi.org/10.1111/ectj.12097.\n\n\nChernozhukov, Victor, Juan Carlos Escanciano, Hidehiko Ichimura, Whitney K Newey, and James M Robins. 2022. “Locally Robust Semiparametric Estimation.” Econometrica 90 (4): 1501–35.\n\n\nRobinson, Peter M. 1988. “Root-n-Consistent Semiparametric Regression.” Econometrica: Journal of the Econometric Society, 931–54.\n\n\nVan der Laan, Mark J, Sherri Rose, et al. 2011. Targeted Learning: Causal Inference for Observational and Experimental Data. Vol. 4. Springer.",
    "crumbs": [
      "<span class='chapter-number'>5</span>  <span class='chapter-title'>複雑な比較分析</span>"
    ]
  }
]